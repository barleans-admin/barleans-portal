<!DOCTYPE html>
<head>
    <title>Home | Barlean's Portal</title>
</head>
<body>
    <nav></nav>
    <h1 id="welcome-message"></h1>

    <script>
        async function getUserInfo() {
            const response = await fetch('/.auth/me');
            const user = await response.json();
            const welcomeElement = document.getElementById('welcome-message');

            const userObj = JSON.parse(user);
            welcomeElement.textContent = "Welcome, " + userObj.clientPrincipal.userDetails + "!";
        }

        getUserInfo();
    </script>
</body>
</html>